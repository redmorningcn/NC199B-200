###############################################################################
#
# IAR ANSI C/C++ Compiler V7.50.1.10123/W32 for ARM       15/Jul/2018  10:36:21
# Copyright 1999-2015 IAR Systems AB.
#
#    Cpu mode     =  thumb
#    Endian       =  little
#    Source file  =  F:\iar\NC210\NC210-200处理板\source\user\IAP_program_mcu.c
#    Command line =  
#        F:\iar\NC210\NC210-200处理板\source\user\IAP_program_mcu.c -D
#        USE_STDPERIPH_DRIVER -D APP_RELEASE -lCN
#        F:\iar\NC210\NC210-200处理板\project\app_release\List -o
#        F:\iar\NC210\NC210-200处理板\project\app_release\Obj --no_cse
#        --no_unroll --no_inline --no_code_motion --no_tbaa --no_clustering
#        --no_scheduling --debug --endian=little --cpu=Cortex-M3 -e --fpu=None
#        --dlib_config "C:\Program Files (x86)\IAR Systems\Embedded Workbench
#        7.3\arm\INC\c\DLib_Config_Full.h" -I
#        F:\iar\NC210\NC210-200处理板\project\ -I
#        F:\iar\NC210\NC210-200处理板\project\..\source\config\ -I
#        F:\iar\NC210\NC210-200处理板\project\..\source\task\ -I
#        F:\iar\NC210\NC210-200处理板\project\..\source\user\ -I
#        F:\iar\NC210\NC210-200处理板\project\..\source\Software\OSAL\OS\ -I
#        F:\iar\NC210\NC210-200处理板\project\..\source\Software\OSAL\Ports\ -I
#        F:\iar\NC210\NC210-200处理板\project\..\source\driver\ -I
#        F:\iar\NC210\NC210-200处理板\project\..\source\Software\uC-LIB\ -I
#        F:\iar\NC210\NC210-200处理板\project\..\source\Software\uC-CPU\ -I
#        F:\iar\NC210\NC210-200处理板\project\..\source\Software\uC-CPU\ARM-Cortex-M3\IAR\
#        -I
#        F:\iar\NC210\NC210-200处理板\project\..\source\Software\uCOS-III\Ports\ARM-Cortex-M3\Generic\IAR\
#        -I
#        F:\iar\NC210\NC210-200处理板\project\..\source\Software\uCOS-III\Source\
#        -I
#        F:\iar\NC210\NC210-200处理板\project\..\source\Software\EvalBoards\Micrium\uC-Eval-STM32F107\BSP\IAR\
#        -I
#        F:\iar\NC210\NC210-200处理板\project\..\source\Software\EvalBoards\Micrium\uC-Eval-STM32F107\BSP\ST\STM32\inc\
#        -I
#        F:\iar\NC210\NC210-200处理板\project\..\source\Software\EvalBoards\Micrium\uC-Eval-STM32F107\BSP\OS\uCOS-III\
#        -I
#        F:\iar\NC210\NC210-200处理板\project\..\source\Software\EvalBoards\Micrium\uC-Eval-STM32F107\BSP\
#        -I
#        F:\iar\NC210\NC210-200处理板\project\..\source\Software\uC-MB\Cfg\Template\
#        -I
#        F:\iar\NC210\NC210-200处理板\project\..\source\Software\uC-MB\OS\uCOS-III\
#        -I
#        F:\iar\NC210\NC210-200处理板\project\..\source\Software\uC-MB\Ports\STM32\STM32F103\IAR\
#        -I
#        F:\iar\NC210\NC210-200处理板\project\..\source\Software\uC-MB\Source\
#        -Ol --use_c++_inline -I "C:\Program Files (x86)\IAR Systems\Embedded
#        Workbench 7.3\arm\CMSIS\Include\"
#    List file    =  
#        F:\iar\NC210\NC210-200处理板\project\app_release\List\IAP_program_mcu.lst
#    Object file  =  
#        F:\iar\NC210\NC210-200处理板\project\app_release\Obj\IAP_program_mcu.o
#
###############################################################################

F:\iar\NC210\NC210-200处理板\source\user\IAP_program_mcu.c
      1          /**************************************************************
      2          * Description  : 程序下载协议
      3          * Author       : 2018/5/25 星期五, by redmorningcn
      4          */
      5          
      6          /*******************************************************************************
      7           * INCLUDES
      8           */
      9          #include  <includes.h>
     10          #include  <IAP_program_mcu.h>
     11          #include  <string.h>
     12          
     13          /*******************************************************************************
     14           * CONSTANTS
     15           */
     16          
     17          
     18          /*******************************************************************************
     19           * TYPEDEFS
     20           */
     21          
     22               
     23          /**************************************************************
     24          * Description  : app_iap_deal  软件远程或串口升级
     25          * Author       : 2018/5/25 星期五, by redmorningcn
     26          */

   \                                 In section .text, align 4, keep-with-next
     27          void    app_iap_deal(void){
   \                     app_iap_deal: (+1)
   \   00000000   0xB5F8             PUSH     {R3-R7,LR}
     28              static          stcIAPPara      sLocalIap;                      //存储的iap参数
     29              static          u32             softver;
     30              static          u32             time = 0;    
     31              stcIAPPara      *sServerIap = (stcIAPPara *)&DtuCom->Rd.dtu.iap.para; //服务器下发的iap参数 
   \   00000002   0xF8DF 0x038C      LDR.W    R0,??app_iap_deal_0
   \   00000006   0x6800             LDR      R0,[R0, #+0]
   \   00000008   0x1C84             ADDS     R4,R0,#+2
     32          
     33          
     34              u8      code = DtuCom->Rd.dtu.iap.code;             //IAP指令位
   \   0000000A   0xF8DF 0x0384      LDR.W    R0,??app_iap_deal_0
   \   0000000E   0x6800             LDR      R0,[R0, #+0]
   \   00000010   0x7800             LDRB     R0,[R0, #+0]
     35              u8      sta  = DtuCom->Rd.dtu.iap.sta;              //IAP状态位
   \   00000012   0xF8DF 0x137C      LDR.W    R1,??app_iap_deal_0
   \   00000016   0x6809             LDR      R1,[R1, #+0]
   \   00000018   0x784E             LDRB     R6,[R1, #+1]
     36              u16     crc16;
     37              u16     idx;                                        //数据标号
     38              u16     datalen;
     39              u16     Chklen;
     40              u32     datasize;
     41              //u32     softsize;
     42              u16     storeCrc;
     43              
     44              switch(code)
   \   0000001A   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   0000001C   0x2801             CMP      R0,#+1
   \   0000001E   0xD007             BEQ.N    ??app_iap_deal_1
   \   00000020   0xF0C0 0x81B0      BCC.W    ??app_iap_deal_2
   \   00000024   0x2803             CMP      R0,#+3
   \   00000026   0xF000 0x811C      BEQ.W    ??app_iap_deal_3
   \   0000002A   0xF0C0 0x8091      BCC.W    ??app_iap_deal_4
   \   0000002E   0xE1A9             B.N      ??app_iap_deal_2
     45              {
     46                  
     47              case IAP_START:                                     //IAP启动,
     48                  //读已存的iappara信息
     49                  //memcpy((uint8 *)&sLocalIap,(uint8 *)IAP_PARA_START_ADDR,sizeof(stcIAPPara));
     50                  BSP_FlashReadBytes(IAP_PARA_START_ADDR,(uint8 *)&sLocalIap,sizeof(stcIAPPara));
   \                     ??app_iap_deal_1: (+1)
   \   00000030   0x2224             MOVS     R2,#+36
   \   00000032   0xF8DF 0x1360      LDR.W    R1,??app_iap_deal_0+0x4
   \   00000036   0xF8DF 0x0360      LDR.W    R0,??app_iap_deal_0+0x8  ;; 0x800d000
   \   0000003A   0x.... 0x....      BL       BSP_FlashReadBytes
     51                  Chklen = (u32)&sLocalIap.Chk - (u32)&sLocalIap;
   \   0000003E   0xF8DF 0x035C      LDR.W    R0,??app_iap_deal_0+0xC
   \   00000042   0xF8DF 0x1350      LDR.W    R1,??app_iap_deal_0+0x4
   \   00000046   0x1A41             SUBS     R1,R0,R1
     52                  crc16 = GetCrc16Chk((uint8 *)&sLocalIap,Chklen);
   \   00000048   0xB289             UXTH     R1,R1            ;; ZeroExt  R1,R1,#+16,#+16
   \   0000004A   0xF8DF 0x0348      LDR.W    R0,??app_iap_deal_0+0x4
   \   0000004E   0x.... 0x....      BL       GetCrc16Chk
   \   00000052   0x0005             MOVS     R5,R0
     53                  
     54                   storeCrc= GetCrc16Chk((uint8 *)&sLocalIap,sizeof(sLocalIap) -2);
   \   00000054   0x2122             MOVS     R1,#+34
   \   00000056   0xF8DF 0x033C      LDR.W    R0,??app_iap_deal_0+0x4
   \   0000005A   0x.... 0x....      BL       GetCrc16Chk
     55          
     56                  
     57                  //对比接收到的iappara信息（版本、大小、已发帧序号、校验、帧号）
     58                  if ( ( sta == 1 )                           ||      // 重新下载
     59                      ( sLocalIap.Idx    == 0xffffffff )      ||          // 存储序号为-1
     60                      ( sLocalIap.Idx    == 0 )               ||          // 存储序号为零
     61                      ( sServerIap->Idx  == 0 )               ||          // 发送下来的序号为零
     62                      ( sLocalIap.Chk    != crc16)            ||          // 校验码不正确
     63                      ( sServerIap->Size != sLocalIap.Size )  ||      // 程序大小不符
     64                                          //( IapServer.Crc32 != IapInfo.Crc32 ) 
     65                      ( sServerIap->SwVer!= sLocalIap.SwVer ) ||       // 版本不符
     66                      ( storeCrc         != sLocalIap.storeCrc)        // 校验码不正确
     67                      ) 
   \   0000005E   0xB2F6             UXTB     R6,R6            ;; ZeroExt  R6,R6,#+24,#+24
   \   00000060   0x2E01             CMP      R6,#+1
   \   00000062   0xD025             BEQ.N    ??app_iap_deal_5
   \   00000064   0xF8DF 0x132C      LDR.W    R1,??app_iap_deal_0+0x4
   \   00000068   0x68C9             LDR      R1,[R1, #+12]
   \   0000006A   0xF111 0x0F01      CMN      R1,#+1
   \   0000006E   0xD01F             BEQ.N    ??app_iap_deal_5
   \   00000070   0xF8DF 0x1320      LDR.W    R1,??app_iap_deal_0+0x4
   \   00000074   0x68C9             LDR      R1,[R1, #+12]
   \   00000076   0x2900             CMP      R1,#+0
   \   00000078   0xD01A             BEQ.N    ??app_iap_deal_5
   \   0000007A   0x68E1             LDR      R1,[R4, #+12]
   \   0000007C   0x2900             CMP      R1,#+0
   \   0000007E   0xD017             BEQ.N    ??app_iap_deal_5
   \   00000080   0xF8DF 0x1310      LDR.W    R1,??app_iap_deal_0+0x4
   \   00000084   0x8A49             LDRH     R1,[R1, #+18]
   \   00000086   0xB2AD             UXTH     R5,R5            ;; ZeroExt  R5,R5,#+16,#+16
   \   00000088   0x42A9             CMP      R1,R5
   \   0000008A   0xD111             BNE.N    ??app_iap_deal_5
   \   0000008C   0x6861             LDR      R1,[R4, #+4]
   \   0000008E   0xF8DF 0x2304      LDR.W    R2,??app_iap_deal_0+0x4
   \   00000092   0x6852             LDR      R2,[R2, #+4]
   \   00000094   0x4291             CMP      R1,R2
   \   00000096   0xD10B             BNE.N    ??app_iap_deal_5
   \   00000098   0x8861             LDRH     R1,[R4, #+2]
   \   0000009A   0xF8DF 0x22F8      LDR.W    R2,??app_iap_deal_0+0x4
   \   0000009E   0x8852             LDRH     R2,[R2, #+2]
   \   000000A0   0x4291             CMP      R1,R2
   \   000000A2   0xD105             BNE.N    ??app_iap_deal_5
   \   000000A4   0xF8DF 0x12EC      LDR.W    R1,??app_iap_deal_0+0x4
   \   000000A8   0x8C49             LDRH     R1,[R1, #+34]
   \   000000AA   0xB280             UXTH     R0,R0            ;; ZeroExt  R0,R0,#+16,#+16
   \   000000AC   0x4288             CMP      R0,R1
   \   000000AE   0xD01C             BEQ.N    ??app_iap_deal_6
     68                  {
     69                      /**************************************************************
     70                      * Description  : 按重发条件返回
     71                      * Author       : 2018/5/28 星期一, by redmorningcn
     72                      */
     73                      sLocalIap.Addr        = USER_BACK_START_ADDR;       //初始化地址
   \                     ??app_iap_deal_5: (+1)
   \   000000B0   0xF8DF 0x02EC      LDR.W    R0,??app_iap_deal_0+0x10  ;; 0x8028000
   \   000000B4   0x49B7             LDR.N    R1,??app_iap_deal_0+0x4
   \   000000B6   0x6088             STR      R0,[R1, #+8]
     74                      sLocalIap.BackAddr    = USER_BACK_START_ADDR;
   \   000000B8   0xF8DF 0x02E4      LDR.W    R0,??app_iap_deal_0+0x10  ;; 0x8028000
   \   000000BC   0x49B5             LDR.N    R1,??app_iap_deal_0+0x4
   \   000000BE   0x6188             STR      R0,[R1, #+24]
     75          
     76                      sLocalIap.Idx         = 0;
   \   000000C0   0x2000             MOVS     R0,#+0
   \   000000C2   0x49B4             LDR.N    R1,??app_iap_deal_0+0x4
   \   000000C4   0x60C8             STR      R0,[R1, #+12]
     77                      
     78                      sLocalIap.HwVer       = Ctrl.sProductInfo.HwVer;    //返回装置版本信息
   \   000000C6   0x48B7             LDR.N    R0,??app_iap_deal_0+0x14
   \   000000C8   0x8D80             LDRH     R0,[R0, #+44]
   \   000000CA   0x49B2             LDR.N    R1,??app_iap_deal_0+0x4
   \   000000CC   0x8008             STRH     R0,[R1, #+0]
     79                      sLocalIap.SwVer       = Ctrl.sProductInfo.SwVer;
   \   000000CE   0x48B5             LDR.N    R0,??app_iap_deal_0+0x14
   \   000000D0   0x8DC0             LDRH     R0,[R0, #+46]
   \   000000D2   0x49B0             LDR.N    R1,??app_iap_deal_0+0x4
   \   000000D4   0x8048             STRH     R0,[R1, #+2]
     80                      sLocalIap.Size        = sServerIap->Size;           
   \   000000D6   0x6860             LDR      R0,[R4, #+4]
   \   000000D8   0x49AE             LDR.N    R1,??app_iap_deal_0+0x4
   \   000000DA   0x6048             STR      R0,[R1, #+4]
     81                      sLocalIap.Crc32       = sServerIap->Crc32;
   \   000000DC   0x6960             LDR      R0,[R4, #+20]
   \   000000DE   0x49AD             LDR.N    R1,??app_iap_deal_0+0x4
   \   000000E0   0x6148             STR      R0,[R1, #+20]
     82                      
     83                      softver               = sServerIap->SwVer;              //保存版本信息，结束时校验使用
   \   000000E2   0x8860             LDRH     R0,[R4, #+2]
   \   000000E4   0x49B0             LDR.N    R1,??app_iap_deal_0+0x18
   \   000000E6   0x6008             STR      R0,[R1, #+0]
   \   000000E8   0xE00B             B.N      ??app_iap_deal_7
     84          
     85                  }else{
     86                      /**************************************************************
     87                      * Description  : 续传，按存储的地址发送
     88                      * Author       : 2018/5/28 星期一, by redmorningcn
     89                      */
     90                      //sLocalIap.HwVer       = Ctrl.sProductInfo.HwVer;  //续传不更改版本信息
     91                      //sLocalIap.SwVer       = Ctrl.sProductInfo.SwVer;  
     92                      sLocalIap.Addr        = USER_BACK_START_ADDR + sLocalIap.Idx * 128;
   \                     ??app_iap_deal_6: (+1)
   \   000000EA   0x48AA             LDR.N    R0,??app_iap_deal_0+0x4
   \   000000EC   0x68C0             LDR      R0,[R0, #+12]
   \   000000EE   0x2180             MOVS     R1,#+128
   \   000000F0   0x4AAB             LDR.N    R2,??app_iap_deal_0+0x10  ;; 0x8028000
   \   000000F2   0xFB01 0x2000      MLA      R0,R1,R0,R2
   \   000000F6   0x49A7             LDR.N    R1,??app_iap_deal_0+0x4
   \   000000F8   0x6088             STR      R0,[R1, #+8]
     93                      softver               = sLocalIap.SwVer;
   \   000000FA   0x48A6             LDR.N    R0,??app_iap_deal_0+0x4
   \   000000FC   0x8840             LDRH     R0,[R0, #+2]
   \   000000FE   0x49AA             LDR.N    R1,??app_iap_deal_0+0x18
   \   00000100   0x6008             STR      R0,[R1, #+0]
     94          
     95                  }
     96                  
     97                  //将升级信息返回给服务器，如硬件版本，软件版本，程序大小，当前地址，当前帧号
     98                  memcpy((u8 *)&DtuCom->Rd.dtu.iap.para,(u8 *)&sLocalIap,sizeof(stcIAPPara)); 
   \                     ??app_iap_deal_7: (+1)
   \   00000102   0x2224             MOVS     R2,#+36
   \   00000104   0x49A3             LDR.N    R1,??app_iap_deal_0+0x4
   \   00000106   0x48A2             LDR.N    R0,??app_iap_deal_0
   \   00000108   0x6800             LDR      R0,[R0, #+0]
   \   0000010A   0x1C84             ADDS     R4,R0,#+2
   \   0000010C   0x0020             MOVS     R0,R4
   \   0000010E   0x.... 0x....      BL       __aeabi_memcpy
     99                  //未发送改写程序，不存储更改后的sLocalIap值。
    100                  sLocalIap.SwVer = softver;
   \   00000112   0x48A5             LDR.N    R0,??app_iap_deal_0+0x18
   \   00000114   0x6800             LDR      R0,[R0, #+0]
   \   00000116   0x499F             LDR.N    R1,??app_iap_deal_0+0x4
   \   00000118   0x8048             STRH     R0,[R1, #+2]
    101                  
    102                  Chklen = (u32)&sLocalIap.Chk - (u32)&sLocalIap;
   \   0000011A   0x48A0             LDR.N    R0,??app_iap_deal_0+0xC
   \   0000011C   0x499D             LDR.N    R1,??app_iap_deal_0+0x4
   \   0000011E   0x1A41             SUBS     R1,R0,R1
    103                  crc16 = GetCrc16Chk((uint8 *)&sLocalIap,Chklen);
   \   00000120   0xB289             UXTH     R1,R1            ;; ZeroExt  R1,R1,#+16,#+16
   \   00000122   0x489C             LDR.N    R0,??app_iap_deal_0+0x4
   \   00000124   0x.... 0x....      BL       GetCrc16Chk
   \   00000128   0x0005             MOVS     R5,R0
    104                  sLocalIap.Chk = crc16;
   \   0000012A   0x489A             LDR.N    R0,??app_iap_deal_0+0x4
   \   0000012C   0x8245             STRH     R5,[R0, #+18]
    105                  
    106                  sLocalIap.storeCrc = GetCrc16Chk((uint8 *)&sLocalIap,sizeof(sLocalIap)-2);  //计算存储校验
   \   0000012E   0x2122             MOVS     R1,#+34
   \   00000130   0x4898             LDR.N    R0,??app_iap_deal_0+0x4
   \   00000132   0x.... 0x....      BL       GetCrc16Chk
   \   00000136   0x4997             LDR.N    R1,??app_iap_deal_0+0x4
   \   00000138   0x8448             STRH     R0,[R1, #+34]
    107          
    108                  BSP_FlashWriteBytes(IAP_PARA_START_ADDR,(uint8 *)&sLocalIap,sizeof(stcIAPPara));        
   \   0000013A   0x2224             MOVS     R2,#+36
   \   0000013C   0x4995             LDR.N    R1,??app_iap_deal_0+0x4
   \   0000013E   0x4896             LDR.N    R0,??app_iap_deal_0+0x8  ;; 0x800d000
   \   00000140   0x.... 0x....      BL       BSP_FlashWriteBytes
    109                  
    110                  time = Ctrl.sHeadInfo.systime;
   \   00000144   0x4897             LDR.N    R0,??app_iap_deal_0+0x14
   \   00000146   0xF8D0 0x0002      LDR      R0,[R0, #+2]
   \   0000014A   0x4998             LDR.N    R1,??app_iap_deal_0+0x1C
   \   0000014C   0x6008             STR      R0,[R1, #+0]
    111                  break;
   \   0000014E   0xE11D             B.N      ??app_iap_deal_8
    112              case IAP_DATA:                                      //IAP数据传输应答
    113                  /**************************************************************
    114                  * Description  : 加入超时判断。长时间未操作(5s)，操作异常。
    115                  * Author       : 2018/6/8 星期五, by redmorningcn
    116                  */
    117                  if(Ctrl.sHeadInfo.systime > time + 5000 && Ctrl.sHeadInfo.systime > time)
   \                     ??app_iap_deal_4: (+1)
   \   00000150   0x4896             LDR.N    R0,??app_iap_deal_0+0x1C
   \   00000152   0x6800             LDR      R0,[R0, #+0]
   \   00000154   0xF500 0x5098      ADD      R0,R0,#+4864
   \   00000158   0x3088             ADDS     R0,R0,#+136
   \   0000015A   0x4992             LDR.N    R1,??app_iap_deal_0+0x14
   \   0000015C   0xF8D1 0x1002      LDR      R1,[R1, #+2]
   \   00000160   0x4288             CMP      R0,R1
   \   00000162   0xD20B             BCS.N    ??app_iap_deal_9
   \   00000164   0x4891             LDR.N    R0,??app_iap_deal_0+0x1C
   \   00000166   0x6800             LDR      R0,[R0, #+0]
   \   00000168   0x498E             LDR.N    R1,??app_iap_deal_0+0x14
   \   0000016A   0xF8D1 0x1002      LDR      R1,[R1, #+2]
   \   0000016E   0x4288             CMP      R0,R1
   \   00000170   0xD204             BCS.N    ??app_iap_deal_9
    118                  {
    119                      DtuCom->Rd.dtu.iap.sta  = IAP_TIME_ERR;         //超时异常
   \   00000172   0x2006             MOVS     R0,#+6
   \   00000174   0x4986             LDR.N    R1,??app_iap_deal_0
   \   00000176   0x6809             LDR      R1,[R1, #+0]
   \   00000178   0x7048             STRB     R0,[R1, #+1]
    120                      break;
   \   0000017A   0xE107             B.N      ??app_iap_deal_8
    121                  }
    122                  sLocalIap.End   =   0;                          //End=1，程序下载完成，End=0，未完
   \                     ??app_iap_deal_9: (+1)
   \   0000017C   0x2000             MOVS     R0,#+0
   \   0000017E   0x4985             LDR.N    R1,??app_iap_deal_0+0x4
   \   00000180   0x8208             STRH     R0,[R1, #+16]
    123                  if(DtuCom->RxCtrl.Len < 4){
   \   00000182   0x4883             LDR.N    R0,??app_iap_deal_0
   \   00000184   0x6800             LDR      R0,[R0, #+0]
   \   00000186   0xF890 0x0416      LDRB     R0,[R0, #+1046]
   \   0000018A   0x2804             CMP      R0,#+4
   \   0000018C   0xDA04             BGE.N    ??app_iap_deal_10
    124                      DtuCom->Rd.dtu.iap.sta  = IAP_IDX_ERR;
   \   0000018E   0x2001             MOVS     R0,#+1
   \   00000190   0x497F             LDR.N    R1,??app_iap_deal_0
   \   00000192   0x6809             LDR      R1,[R1, #+0]
   \   00000194   0x7048             STRB     R0,[R1, #+1]
    125                      break;
   \   00000196   0xE0F9             B.N      ??app_iap_deal_8
    126                  }
    127                  datalen = DtuCom->RxCtrl.Len  - 4;              //此帧程序长度。减code（1），sta（1），idx（2）
   \                     ??app_iap_deal_10: (+1)
   \   00000198   0x487D             LDR.N    R0,??app_iap_deal_0
   \   0000019A   0x6800             LDR      R0,[R0, #+0]
   \   0000019C   0xF890 0x0416      LDRB     R0,[R0, #+1046]
   \   000001A0   0x1F04             SUBS     R4,R0,#+4
    128                  idx = DtuCom->Rd.dtu.iap.idx;                   //序号
   \   000001A2   0x487B             LDR.N    R0,??app_iap_deal_0
   \   000001A4   0x6800             LDR      R0,[R0, #+0]
   \   000001A6   0x8840             LDRH     R0,[R0, #+2]
    129                  
    130                  DtuCom->Rd.dtu.iap.sta = IAP_NO_ERR;           //应答默认正常
   \   000001A8   0x2100             MOVS     R1,#+0
   \   000001AA   0x4A79             LDR.N    R2,??app_iap_deal_0
   \   000001AC   0x6812             LDR      R2,[R2, #+0]
   \   000001AE   0x7051             STRB     R1,[R2, #+1]
    131                  
    132                  /**************************************************************
    133                  * Description  : 程序传输，根据idx协调发送同步。
    134                  接收的idx和想接收的idx相同，接收正确。
    135                  * Author       : 2018/5/28 星期一, by redmorningcn
    136                  */
    137                  if(idx == sLocalIap.Idx)                        //序号相等，继续发送。
   \   000001B0   0xB280             UXTH     R0,R0            ;; ZeroExt  R0,R0,#+16,#+16
   \   000001B2   0x4978             LDR.N    R1,??app_iap_deal_0+0x4
   \   000001B4   0x68C9             LDR      R1,[R1, #+12]
   \   000001B6   0x4288             CMP      R0,R1
   \   000001B8   0xD13F             BNE.N    ??app_iap_deal_11
    138                  {
    139                      BSP_FlashWriteBytes_Fast(sLocalIap.Addr,DtuCom->Rd.dtu.iap.buf,datalen); //将数据写入指定地址
   \   000001BA   0x0022             MOVS     R2,R4
   \   000001BC   0xB292             UXTH     R2,R2            ;; ZeroExt  R2,R2,#+16,#+16
   \   000001BE   0x4874             LDR.N    R0,??app_iap_deal_0
   \   000001C0   0x6800             LDR      R0,[R0, #+0]
   \   000001C2   0x1D01             ADDS     R1,R0,#+4
   \   000001C4   0x4873             LDR.N    R0,??app_iap_deal_0+0x4
   \   000001C6   0x6880             LDR      R0,[R0, #+8]
   \   000001C8   0x.... 0x....      BL       BSP_FlashWriteBytes_Fast
    140                      
    141                      sLocalIap.Addr +=  datalen;
   \   000001CC   0x4871             LDR.N    R0,??app_iap_deal_0+0x4
   \   000001CE   0x6880             LDR      R0,[R0, #+8]
   \   000001D0   0xB2A4             UXTH     R4,R4            ;; ZeroExt  R4,R4,#+16,#+16
   \   000001D2   0x1820             ADDS     R0,R4,R0
   \   000001D4   0x496F             LDR.N    R1,??app_iap_deal_0+0x4
   \   000001D6   0x6088             STR      R0,[R1, #+8]
    142                      
    143                      u32 size = sLocalIap.Addr - USER_BACK_START_ADDR;   //已下载程序大小
   \   000001D8   0x486E             LDR.N    R0,??app_iap_deal_0+0x4
   \   000001DA   0x6880             LDR      R0,[R0, #+8]
   \   000001DC   0x4974             LDR.N    R1,??app_iap_deal_0+0x20  ;; 0xf7fd8000
   \   000001DE   0x1808             ADDS     R0,R1,R0
    144                      if(     size > sLocalIap.Size                       //已发送的程序大小已经大于程序大小。
    145                         ||   sLocalIap.Size > USER_BACK_PRO_SIZE)        //程序大于存储区域
   \   000001E0   0x496C             LDR.N    R1,??app_iap_deal_0+0x4
   \   000001E2   0x6849             LDR      R1,[R1, #+4]
   \   000001E4   0x4281             CMP      R1,R0
   \   000001E6   0xD304             BCC.N    ??app_iap_deal_12
   \   000001E8   0x486A             LDR.N    R0,??app_iap_deal_0+0x4
   \   000001EA   0x6840             LDR      R0,[R0, #+4]
   \   000001EC   0xF5B0 0x3FC0      CMP      R0,#+98304
   \   000001F0   0xD303             BCC.N    ??app_iap_deal_13
    146                      {
    147                          DtuCom->Rd.dtu.iap.sta = IAP_SIZE_ERR;          //程序大小错误 
   \                     ??app_iap_deal_12: (+1)
   \   000001F2   0x2003             MOVS     R0,#+3
   \   000001F4   0x4966             LDR.N    R1,??app_iap_deal_0
   \   000001F6   0x6809             LDR      R1,[R1, #+0]
   \   000001F8   0x7048             STRB     R0,[R1, #+1]
    148                      }
    149                      //存参数
    150                      Chklen = (u32)&sLocalIap.Chk - (u32)&sLocalIap;
   \                     ??app_iap_deal_13: (+1)
   \   000001FA   0x4868             LDR.N    R0,??app_iap_deal_0+0xC
   \   000001FC   0x4965             LDR.N    R1,??app_iap_deal_0+0x4
   \   000001FE   0x1A41             SUBS     R1,R0,R1
    151                      crc16 = GetCrc16Chk((uint8 *)&sLocalIap,Chklen);
   \   00000200   0xB289             UXTH     R1,R1            ;; ZeroExt  R1,R1,#+16,#+16
   \   00000202   0x4864             LDR.N    R0,??app_iap_deal_0+0x4
   \   00000204   0x.... 0x....      BL       GetCrc16Chk
   \   00000208   0x0005             MOVS     R5,R0
    152                      
    153                      sLocalIap.Chk = crc16;
   \   0000020A   0x4862             LDR.N    R0,??app_iap_deal_0+0x4
   \   0000020C   0x8245             STRH     R5,[R0, #+18]
    154                      sLocalIap.storeCrc = GetCrc16Chk((uint8 *)&sLocalIap,sizeof(sLocalIap)-2);  //计算存储校验
   \   0000020E   0x2122             MOVS     R1,#+34
   \   00000210   0x4860             LDR.N    R0,??app_iap_deal_0+0x4
   \   00000212   0x.... 0x....      BL       GetCrc16Chk
   \   00000216   0x495F             LDR.N    R1,??app_iap_deal_0+0x4
   \   00000218   0x8448             STRH     R0,[R1, #+34]
    155          
    156                      BSP_FlashWriteBytes(IAP_PARA_START_ADDR,(uint8 *)&sLocalIap,sizeof(stcIAPPara));
   \   0000021A   0x2224             MOVS     R2,#+36
   \   0000021C   0x495D             LDR.N    R1,??app_iap_deal_0+0x4
   \   0000021E   0x485E             LDR.N    R0,??app_iap_deal_0+0x8  ;; 0x800d000
   \   00000220   0x.... 0x....      BL       BSP_FlashWriteBytes
    157                      
    158                      DtuCom->Rd.dtu.iap.replyIdx = sLocalIap.Idx;            //应答当前序号。    
   \   00000224   0x485B             LDR.N    R0,??app_iap_deal_0+0x4
   \   00000226   0x68C0             LDR      R0,[R0, #+12]
   \   00000228   0x4959             LDR.N    R1,??app_iap_deal_0
   \   0000022A   0x6809             LDR      R1,[R1, #+0]
   \   0000022C   0x8048             STRH     R0,[R1, #+2]
    159                      sLocalIap.Idx++;                                        //序号++，数据往下进行。
   \   0000022E   0x4859             LDR.N    R0,??app_iap_deal_0+0x4
   \   00000230   0x68C0             LDR      R0,[R0, #+12]
   \   00000232   0x1C40             ADDS     R0,R0,#+1
   \   00000234   0x4957             LDR.N    R1,??app_iap_deal_0+0x4
   \   00000236   0x60C8             STR      R0,[R1, #+12]
   \   00000238   0xE00D             B.N      ??app_iap_deal_14
    160          
    161                  }else if(idx == sLocalIap.Idx -1){                          //重复帧，不处理（上一帧重复发送）
   \                     ??app_iap_deal_11: (+1)
   \   0000023A   0xB280             UXTH     R0,R0            ;; ZeroExt  R0,R0,#+16,#+16
   \   0000023C   0x4955             LDR.N    R1,??app_iap_deal_0+0x4
   \   0000023E   0x68C9             LDR      R1,[R1, #+12]
   \   00000240   0x1E49             SUBS     R1,R1,#+1
   \   00000242   0x4288             CMP      R0,R1
   \   00000244   0xD103             BNE.N    ??app_iap_deal_15
    162                      DtuCom->Rd.dtu.iap.replyIdx = idx;
   \   00000246   0x4952             LDR.N    R1,??app_iap_deal_0
   \   00000248   0x6809             LDR      R1,[R1, #+0]
   \   0000024A   0x8048             STRH     R0,[R1, #+2]
   \   0000024C   0xE003             B.N      ??app_iap_deal_14
    163                      
    164                  }else{                                                  //帧序号错误。
    165                      DtuCom->Rd.dtu.iap.sta  = IAP_IDX_ERR;
   \                     ??app_iap_deal_15: (+1)
   \   0000024E   0x2001             MOVS     R0,#+1
   \   00000250   0x494F             LDR.N    R1,??app_iap_deal_0
   \   00000252   0x6809             LDR      R1,[R1, #+0]
   \   00000254   0x7048             STRB     R0,[R1, #+1]
    166                  }
    167                  
    168                  time = Ctrl.sHeadInfo.systime;
   \                     ??app_iap_deal_14: (+1)
   \   00000256   0x4853             LDR.N    R0,??app_iap_deal_0+0x14
   \   00000258   0xF8D0 0x0002      LDR      R0,[R0, #+2]
   \   0000025C   0x4953             LDR.N    R1,??app_iap_deal_0+0x1C
   \   0000025E   0x6008             STR      R0,[R1, #+0]
    169                  break;
   \   00000260   0xE094             B.N      ??app_iap_deal_8
    170              case IAP_END:
    171                  /**************************************************************
    172                  * Description  : 加入超时判断。长时间未操作(5s)，操作异常。
    173                  * Author       : 2018/6/8 星期五, by redmorningcn
    174                  */
    175                  if(Ctrl.sHeadInfo.systime > time + 5000 && Ctrl.sHeadInfo.systime > time)
   \                     ??app_iap_deal_3: (+1)
   \   00000262   0x4852             LDR.N    R0,??app_iap_deal_0+0x1C
   \   00000264   0x6800             LDR      R0,[R0, #+0]
   \   00000266   0xF500 0x5098      ADD      R0,R0,#+4864
   \   0000026A   0x3088             ADDS     R0,R0,#+136
   \   0000026C   0x494D             LDR.N    R1,??app_iap_deal_0+0x14
   \   0000026E   0xF8D1 0x1002      LDR      R1,[R1, #+2]
   \   00000272   0x4288             CMP      R0,R1
   \   00000274   0xD20B             BCS.N    ??app_iap_deal_16
   \   00000276   0x484D             LDR.N    R0,??app_iap_deal_0+0x1C
   \   00000278   0x6800             LDR      R0,[R0, #+0]
   \   0000027A   0x494A             LDR.N    R1,??app_iap_deal_0+0x14
   \   0000027C   0xF8D1 0x1002      LDR      R1,[R1, #+2]
   \   00000280   0x4288             CMP      R0,R1
   \   00000282   0xD204             BCS.N    ??app_iap_deal_16
    176                  {
    177                      DtuCom->Rd.dtu.iap.sta  = IAP_TIME_ERR;         //超时异常
   \   00000284   0x2006             MOVS     R0,#+6
   \   00000286   0x4942             LDR.N    R1,??app_iap_deal_0
   \   00000288   0x6809             LDR      R1,[R1, #+0]
   \   0000028A   0x7048             STRB     R0,[R1, #+1]
    178                      break;
   \   0000028C   0xE07E             B.N      ??app_iap_deal_8
    179                  }
    180                  //将显示任务显示暂停2秒钟
    181                  App_DispDelay(2000); 
   \                     ??app_iap_deal_16: (+1)
   \   0000028E   0xF44F 0x60FA      MOV      R0,#+2000
   \   00000292   0x.... 0x....      BL       App_DispDelay
    182                  
    183                  //程序大小超界判断
    184                  datasize = (u32)sLocalIap.Addr - (u32)sLocalIap.BackAddr;
   \   00000296   0x483F             LDR.N    R0,??app_iap_deal_0+0x4
   \   00000298   0x6880             LDR      R0,[R0, #+8]
   \   0000029A   0x493E             LDR.N    R1,??app_iap_deal_0+0x4
   \   0000029C   0x6989             LDR      R1,[R1, #+24]
   \   0000029E   0x1A40             SUBS     R0,R0,R1
    185                  if((datasize > USER_BACK_PRO_SIZE) || (datasize > USER_APP_PRO_SIZE)){
   \   000002A0   0xF5B0 0x3FC0      CMP      R0,#+98304
   \   000002A4   0xD202             BCS.N    ??app_iap_deal_17
   \   000002A6   0x4943             LDR.N    R1,??app_iap_deal_0+0x24  ;; 0x17fff
   \   000002A8   0x4288             CMP      R0,R1
   \   000002AA   0xD307             BCC.N    ??app_iap_deal_18
    186                      DtuCom->Rd.dtu.iap.sta  = IAP_END_ERR;      //结束时，信息错误。
   \                     ??app_iap_deal_17: (+1)
   \   000002AC   0x2005             MOVS     R0,#+5
   \   000002AE   0x4938             LDR.N    R1,??app_iap_deal_0
   \   000002B0   0x6809             LDR      R1,[R1, #+0]
   \   000002B2   0x7048             STRB     R0,[R1, #+1]
    187                      uprintf("iap err.5");
   \   000002B4   0x4840             LDR.N    R0,??app_iap_deal_0+0x28
   \   000002B6   0x.... 0x....      BL       uprintf
    188                      break;
   \   000002BA   0xE067             B.N      ??app_iap_deal_8
    189                  }
    190                  
    191                  //结束，完成性判断。（已存大小和程序大小相符）
    192                  if(     sLocalIap.SwVer == DtuCom->Rd.dtu.iap.para.SwVer//软件版本相符
    193                     ||   datasize  == DtuCom->Rd.dtu.iap.para.Size //已写数据大小等于程序大小
    194                     )    
   \                     ??app_iap_deal_18: (+1)
   \   000002BC   0x4935             LDR.N    R1,??app_iap_deal_0+0x4
   \   000002BE   0x8849             LDRH     R1,[R1, #+2]
   \   000002C0   0x4A33             LDR.N    R2,??app_iap_deal_0
   \   000002C2   0x6812             LDR      R2,[R2, #+0]
   \   000002C4   0x8892             LDRH     R2,[R2, #+4]
   \   000002C6   0x4291             CMP      R1,R2
   \   000002C8   0xD005             BEQ.N    ??app_iap_deal_19
   \   000002CA   0x4931             LDR.N    R1,??app_iap_deal_0
   \   000002CC   0x6809             LDR      R1,[R1, #+0]
   \   000002CE   0xF8D1 0x1006      LDR      R1,[R1, #+6]
   \   000002D2   0x4288             CMP      R0,R1
   \   000002D4   0xD14E             BNE.N    ??app_iap_deal_20
    195                  {
    196                      sLocalIap.End = 1;              //已经下载完成
   \                     ??app_iap_deal_19: (+1)
   \   000002D6   0x2001             MOVS     R0,#+1
   \   000002D8   0x492E             LDR.N    R1,??app_iap_deal_0+0x4
   \   000002DA   0x8208             STRH     R0,[R1, #+16]
    197          
    198                      /**************************************************************
    199                      * Description  : 根据程序大小，确认是否下载为boot。
    200                      如果程序小于USER_BOOT_PRO_SIZE，认为是boot程序。写入boot区。
    201                      * Author       : 2018/5/28 星期一, by redmorningcn
    202                      */
    203                      if(sLocalIap.Size +  2048 < USER_BOOT_PRO_SIZE )
   \   000002DC   0x482D             LDR.N    R0,??app_iap_deal_0+0x4
   \   000002DE   0x6840             LDR      R0,[R0, #+4]
   \   000002E0   0xF510 0x6000      ADDS     R0,R0,#+2048
   \   000002E4   0xF64A 0x71FF      MOVW     R1,#+45055
   \   000002E8   0x4288             CMP      R0,R1
   \   000002EA   0xD223             BCS.N    ??app_iap_deal_21
    204                      {
    205                          u32 framnum     = (sLocalIap.Size + IAP_DATA_BUF_LEN -1)/ IAP_DATA_BUF_LEN;
   \   000002EC   0x4829             LDR.N    R0,??app_iap_deal_0+0x4
   \   000002EE   0x6840             LDR      R0,[R0, #+4]
   \   000002F0   0x307F             ADDS     R0,R0,#+127
   \   000002F2   0x09C4             LSRS     R4,R0,#+7
    206                          u32 bootaddr    = USER_BOOT_START_ADDR;     //boot初始地址
   \   000002F4   0xF05F 0x6500      MOVS     R5,#+134217728
    207                          u32 backupaddr  = sLocalIap.BackAddr;
   \   000002F8   0x4826             LDR.N    R0,??app_iap_deal_0+0x4
   \   000002FA   0x6986             LDR      R6,[R0, #+24]
    208                          for(u32 i= 0;i< framnum ;i++){
   \   000002FC   0x2700             MOVS     R7,#+0
   \   000002FE   0xE010             B.N      ??app_iap_deal_22
    209                              BSP_FlashReadBytes(backupaddr,DtuCom->Rd.dtu.iap.buf,IAP_DATA_BUF_LEN);
   \                     ??app_iap_deal_23: (+1)
   \   00000300   0x2280             MOVS     R2,#+128
   \   00000302   0x4823             LDR.N    R0,??app_iap_deal_0
   \   00000304   0x6800             LDR      R0,[R0, #+0]
   \   00000306   0x1D01             ADDS     R1,R0,#+4
   \   00000308   0x0030             MOVS     R0,R6
   \   0000030A   0x.... 0x....      BL       BSP_FlashReadBytes
    210                              BSP_FlashWriteBytes_Fast(bootaddr,DtuCom->Rd.dtu.iap.buf,IAP_DATA_BUF_LEN);
   \   0000030E   0x2280             MOVS     R2,#+128
   \   00000310   0x481F             LDR.N    R0,??app_iap_deal_0
   \   00000312   0x6800             LDR      R0,[R0, #+0]
   \   00000314   0x1D01             ADDS     R1,R0,#+4
   \   00000316   0x0028             MOVS     R0,R5
   \   00000318   0x.... 0x....      BL       BSP_FlashWriteBytes_Fast
    211                              bootaddr    += IAP_DATA_BUF_LEN;
   \   0000031C   0x3580             ADDS     R5,R5,#+128
    212                              backupaddr  += IAP_DATA_BUF_LEN;
   \   0000031E   0x3680             ADDS     R6,R6,#+128
    213                          }
   \   00000320   0x1C7F             ADDS     R7,R7,#+1
   \                     ??app_iap_deal_22: (+1)
   \   00000322   0x42A7             CMP      R7,R4
   \   00000324   0xD3EC             BCC.N    ??app_iap_deal_23
    214                          sLocalIap.End = 0;                          //写boot后，清除标识   
   \   00000326   0x2000             MOVS     R0,#+0
   \   00000328   0x491A             LDR.N    R1,??app_iap_deal_0+0x4
   \   0000032A   0x8208             STRH     R0,[R1, #+16]
    215                          uprintf("boot ok");
   \   0000032C   0x4823             LDR.N    R0,??app_iap_deal_0+0x2C
   \   0000032E   0x.... 0x....      BL       uprintf
   \   00000332   0xE002             B.N      ??app_iap_deal_24
    216                      }else{
    217                          uprintf("app ok");
   \                     ??app_iap_deal_21: (+1)
   \   00000334   0x4822             LDR.N    R0,??app_iap_deal_0+0x30
   \   00000336   0x.... 0x....      BL       uprintf
    218                      }
    219                      
    220                      /**************************************************************
    221                      * Description  : 下载完成
    222                      * Author       : 2018/5/28 星期一, by redmorningcn
    223                      */
    224                      sLocalIap.Idx = 0;          //序号清零
   \                     ??app_iap_deal_24: (+1)
   \   0000033A   0x2000             MOVS     R0,#+0
   \   0000033C   0x4915             LDR.N    R1,??app_iap_deal_0+0x4
   \   0000033E   0x60C8             STR      R0,[R1, #+12]
    225                      //存参数
    226                      
    227                      Chklen = (u32)&sLocalIap.Chk - (u32)&sLocalIap;
   \   00000340   0x4816             LDR.N    R0,??app_iap_deal_0+0xC
   \   00000342   0x4914             LDR.N    R1,??app_iap_deal_0+0x4
   \   00000344   0x1A41             SUBS     R1,R0,R1
    228                      crc16 = GetCrc16Chk((uint8 *)&sLocalIap,Chklen);
   \   00000346   0xB289             UXTH     R1,R1            ;; ZeroExt  R1,R1,#+16,#+16
   \   00000348   0x4812             LDR.N    R0,??app_iap_deal_0+0x4
   \   0000034A   0x.... 0x....      BL       GetCrc16Chk
   \   0000034E   0x0005             MOVS     R5,R0
    229                      sLocalIap.Chk = crc16;
   \   00000350   0x4810             LDR.N    R0,??app_iap_deal_0+0x4
   \   00000352   0x8245             STRH     R5,[R0, #+18]
    230                      
    231                      sLocalIap.BackAddr = (u32)sLocalIap.BackAddr;                               //back区地址
   \   00000354   0x480F             LDR.N    R0,??app_iap_deal_0+0x4
   \   00000356   0x6980             LDR      R0,[R0, #+24]
   \   00000358   0x490E             LDR.N    R1,??app_iap_deal_0+0x4
   \   0000035A   0x6188             STR      R0,[R1, #+24]
    232                      sLocalIap.storeCrc = GetCrc16Chk((uint8 *)&sLocalIap,sizeof(sLocalIap)-2);  //计算存储校验
   \   0000035C   0x2122             MOVS     R1,#+34
   \   0000035E   0x480D             LDR.N    R0,??app_iap_deal_0+0x4
   \   00000360   0x.... 0x....      BL       GetCrc16Chk
   \   00000364   0x490B             LDR.N    R1,??app_iap_deal_0+0x4
   \   00000366   0x8448             STRH     R0,[R1, #+34]
    233                      
    234                      BSP_FlashWriteBytes(IAP_PARA_START_ADDR,(uint8 *)&sLocalIap,sizeof(stcIAPPara));
   \   00000368   0x2224             MOVS     R2,#+36
   \   0000036A   0x490A             LDR.N    R1,??app_iap_deal_0+0x4
   \   0000036C   0x480A             LDR.N    R0,??app_iap_deal_0+0x8  ;; 0x800d000
   \   0000036E   0x.... 0x....      BL       BSP_FlashWriteBytes
   \   00000372   0xE006             B.N      ??app_iap_deal_25
    235                  }else{
    236                      DtuCom->Rd.dtu.iap.sta  = IAP_END_ERR;      //结束时，信息错误。
   \                     ??app_iap_deal_20: (+1)
   \   00000374   0x2005             MOVS     R0,#+5
   \   00000376   0x4906             LDR.N    R1,??app_iap_deal_0
   \   00000378   0x6809             LDR      R1,[R1, #+0]
   \   0000037A   0x7048             STRB     R0,[R1, #+1]
    237                      uprintf("iap err.5");
   \   0000037C   0x480E             LDR.N    R0,??app_iap_deal_0+0x28
   \   0000037E   0x.... 0x....      BL       uprintf
    238                  }
    239                  
    240                  break;
   \                     ??app_iap_deal_25: (+1)
   \   00000382   0xE003             B.N      ??app_iap_deal_8
    241              default:
    242                  DtuCom->Rd.dtu.iap.sta  = IAP_CODE_ERR;         //指令错误
   \                     ??app_iap_deal_2: (+1)
   \   00000384   0x2002             MOVS     R0,#+2
   \   00000386   0x4902             LDR.N    R1,??app_iap_deal_0
   \   00000388   0x6809             LDR      R1,[R1, #+0]
   \   0000038A   0x7048             STRB     R0,[R1, #+1]
    243                  break;
    244              }
    245          }
   \                     ??app_iap_deal_8: (+1)
   \   0000038C   0xBDF1             POP      {R0,R4-R7,PC}    ;; return
   \   0000038E   0xBF00             Nop      
   \                     ??app_iap_deal_0:
   \   00000390   0x........         DC32     DtuCom
   \   00000394   0x........         DC32     ??sLocalIap
   \   00000398   0x0800D000         DC32     0x800d000
   \   0000039C   0x........         DC32     ??sLocalIap+0x12
   \   000003A0   0x08028000         DC32     0x8028000
   \   000003A4   0x........         DC32     Ctrl
   \   000003A8   0x........         DC32     ??softver
   \   000003AC   0x........         DC32     ??time
   \   000003B0   0xF7FD8000         DC32     0xf7fd8000
   \   000003B4   0x00017FFF         DC32     0x17fff
   \   000003B8   0x........         DC32     ?_0
   \   000003BC   0x........         DC32     ?_1
   \   000003C0   0x........         DC32     ?_2

   \                                 In section .bss, align 4
   \                     ??sLocalIap:
   \   00000000                      DS8 36

   \                                 In section .bss, align 4
   \                     ??softver:
   \   00000000                      DS8 4

   \                                 In section .bss, align 4
   \                     ??time:
   \   00000000                      DS8 4

   \                                 In section .rodata, align 4
   \                     ?_0:
   \   00000000   0x69 0x61          DC8 "iap err.5"
   \              0x70 0x20    
   \              0x65 0x72    
   \              0x72 0x2E    
   \              0x35 0x00    
   \   0000000A   0x00 0x00          DC8 0, 0

   \                                 In section .rodata, align 4
   \                     ?_1:
   \   00000000   0x62 0x6F          DC8 "boot ok"
   \              0x6F 0x74    
   \              0x20 0x6F    
   \              0x6B 0x00    

   \                                 In section .rodata, align 4
   \                     ?_2:
   \   00000000   0x61 0x70          DC8 "app ok"
   \              0x70 0x20    
   \              0x6F 0x6B    
   \              0x00         
   \   00000007   0x00               DC8 0
    246          
    247          
    248          /*******************************************************************************
    249           * 				end of file                                                    *
    250           *******************************************************************************/

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
      24   app_iap_deal
        24   -> App_DispDelay
        24   -> BSP_FlashReadBytes
        24   -> BSP_FlashWriteBytes
        24   -> BSP_FlashWriteBytes_Fast
        24   -> GetCrc16Chk
        24   -> __aeabi_memcpy
        24   -> uprintf


   Section sizes:

   Bytes  Function/Label
   -----  --------------
      12  ?_0
       8  ?_1
       8  ?_2
     964  app_iap_deal
      36  sLocalIap
       4  softver
       4  time

 
  44 bytes in section .bss
  28 bytes in section .rodata
 964 bytes in section .text
 
 964 bytes of CODE  memory
  28 bytes of CONST memory
  44 bytes of DATA  memory

Errors: none
Warnings: none
